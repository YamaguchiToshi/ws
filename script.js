const a0_0x45a4e3=a0_0x2bdc;(function(_0x1ef680,_0x410569){const _0x184180=a0_0x2bdc,_0x1dfd08=_0x1ef680();while(!![]){try{const _0x467780=parseInt(_0x184180(0x1b5))/0x1+parseInt(_0x184180(0x1c2))/0x2+-parseInt(_0x184180(0x216))/0x3+-parseInt(_0x184180(0x1c3))/0x4+parseInt(_0x184180(0x1cd))/0x5+parseInt(_0x184180(0x1b4))/0x6*(parseInt(_0x184180(0x215))/0x7)+-parseInt(_0x184180(0x208))/0x8*(parseInt(_0x184180(0x21e))/0x9);if(_0x467780===_0x410569)break;else _0x1dfd08['push'](_0x1dfd08['shift']());}catch(_0x13fe9e){_0x1dfd08['push'](_0x1dfd08['shift']());}}}(a0_0x3a89,0xdda44));let heatmap,isTracking=![],lastMoveTime=0x0,lastMoveTimeForEffects=0x0,positions=[],trackingTimer,lastKnownMousePosition={'x':0x0,'y':0x0};function a0_0x3a89(){const _0x9c83aa=['stroke','sounds/fuwa.mp3','readAsDataURL','disabled','result','click','http://www.w3.org/2000/svg','fill','scrollHeight','100%','backgroundColor','hsl(','onload','classList','length','start','rgba(0,\x200,\x200,\x200)','16anKxLh','createBufferSource','ripple','add','circle','destination','round','heatmapContainer','12px','webkitAudioContext','files','scrollWidth','absolute','7sRAlvt','4751052mxGMdV','Error\x20playing\x20sound:','hidden','pulse','input','showGazePlotButton','transform','sounds/short_float.mp3','5345163xLOppR','heatmap_export.png','log','addEventListener','white','change','toDataURL','rippleSound','animate','transition','create','Start\x20Tracking','position','pageX','reduce','8335686SnswSx','1418927BGHyYJ','image/octet-stream','playbackRate','durationInput','createEffect','getElementById','float','className',',\x20100%,\x2050%)','url(\x27','style','createElement','setData','2150490McqAVH','1809400eZEsIy','state','body','Tracking...','appendChild','replace','font-size','initAudioContext','stroke-width','effectSelect','1241195uepAKl','href','all\x202s\x20ease-out','mousemove','createElementNS','backgroundImage','clearHeatmapButton','playSound','audioContext','pageY','Please\x20enter\x20a\x20valid\x20duration\x20between\x201\x20and\x2060\x20seconds.','target','resetBackgroundButton','textContent','width','black','height','random','pulseSound','connect','points','now','svg','image/png','remove','value','AudioContext','push','duration','buffer','20px','resize','div','volume','element','text','fill-opacity','60px','setAttribute','currentSound','left','top'];a0_0x3a89=function(){return _0x9c83aa;};return a0_0x3a89();}const interval=0x3e8/0x3c,controlPanel=document[a0_0x45a4e3(0x1ba)]('controlPanel'),startButton=document[a0_0x45a4e3(0x1ba)]('startButton'),durationInput=document['getElementById'](a0_0x45a4e3(0x1b8)),backgroundInput=document[a0_0x45a4e3(0x1ba)]('backgroundInput'),resetBackgroundButton=document[a0_0x45a4e3(0x1ba)](a0_0x45a4e3(0x1d9)),clearHeatmapButton=document[a0_0x45a4e3(0x1ba)](a0_0x45a4e3(0x1d3)),exportButton=document[a0_0x45a4e3(0x1ba)]('exportButton'),effectSelect=document['getElementById'](a0_0x45a4e3(0x1cc)),volumeControl=document[a0_0x45a4e3(0x1ba)]('volumeControl');heatmap=h337[a0_0x45a4e3(0x1af)]({'container':document[a0_0x45a4e3(0x1ba)](a0_0x45a4e3(0x20f)),'maxOpacity':0.6,'radius':0x32,'blur':0.9,'backgroundColor':a0_0x45a4e3(0x207)});class Effect{static [a0_0x45a4e3(0x1d5)]=null;static [a0_0x45a4e3(0x1f4)]=null;static[a0_0x45a4e3(0x1ca)](){const _0x204faa=a0_0x45a4e3;!Effect[_0x204faa(0x1d5)]&&(Effect[_0x204faa(0x1d5)]=new(window[(_0x204faa(0x1e7))]||window[(_0x204faa(0x211))])(),Effect[_0x204faa(0x1d5)][_0x204faa(0x1c4)]==='suspended'&&Effect[_0x204faa(0x1d5)]['resume']());}constructor(_0x38e152,_0x3654e5,_0x3c3898,_0xa121d4=0x1){const _0x117d8e=a0_0x45a4e3;this[_0x117d8e(0x1ef)]=document['createElement'](_0x117d8e(0x1ed)),this[_0x117d8e(0x1ef)][_0x117d8e(0x1bf)][_0x117d8e(0x1b1)]='absolute',this[_0x117d8e(0x1ef)][_0x117d8e(0x1bf)][_0x117d8e(0x1f5)]=_0x38e152-0xa+'px',this[_0x117d8e(0x1ef)][_0x117d8e(0x1bf)][_0x117d8e(0x1f6)]=_0x3654e5-0xa+'px',this['element'][_0x117d8e(0x1bf)][_0x117d8e(0x201)]=_0x3c3898,this[_0x117d8e(0x1b7)]=_0xa121d4;}async[a0_0x45a4e3(0x1d4)](_0x405ac4){const _0x2381e1=a0_0x45a4e3;!Effect['audioContext']&&Effect['initAudioContext']();if(Effect[_0x2381e1(0x1f4)])return;try{const _0x27d2bb=await fetch(_0x405ac4),_0x458778=await _0x27d2bb['arrayBuffer'](),_0x2e1a25=await Effect[_0x2381e1(0x1d5)]['decodeAudioData'](_0x458778),_0x56da10=Effect[_0x2381e1(0x1d5)][_0x2381e1(0x209)]();_0x56da10[_0x2381e1(0x1ea)]=_0x2e1a25,_0x56da10['playbackRate'][_0x2381e1(0x1e6)]=this[_0x2381e1(0x1b7)],_0x56da10[_0x2381e1(0x1e0)](Effect[_0x2381e1(0x1d5)][_0x2381e1(0x20d)]),Effect[_0x2381e1(0x1f4)]=_0x56da10,_0x56da10['onended']=()=>{Effect['currentSound']=null;},_0x56da10[_0x2381e1(0x206)]();}catch(_0x48a33c){console['error'](_0x2381e1(0x217),_0x48a33c);}}}class RippleEffect extends Effect{constructor(_0x423019,_0x467541,_0x587b6e){const _0x1de1e4=a0_0x45a4e3;super(_0x423019,_0x467541,_0x587b6e,1.5),this['element'][_0x1de1e4(0x1bc)]=_0x1de1e4(0x20a);}[a0_0x45a4e3(0x1ad)](){const _0x2367ef=a0_0x45a4e3;document[_0x2367ef(0x1c5)][_0x2367ef(0x1c7)](this[_0x2367ef(0x1ef)]),this[_0x2367ef(0x1d4)](_0x2367ef(0x1f8)),setTimeout(()=>this['element'][_0x2367ef(0x1e5)](),0x4e20);}}class PulseEffect extends Effect{constructor(_0x4cf827,_0x449e61,_0x3b3ccb){const _0x38ef2b=a0_0x45a4e3;super(_0x4cf827,_0x449e61,_0x3b3ccb,0x2),this[_0x38ef2b(0x1ef)]['className']=_0x38ef2b(0x219);}[a0_0x45a4e3(0x1ad)](){const _0x27531f=a0_0x45a4e3;document[_0x27531f(0x1c5)][_0x27531f(0x1c7)](this[_0x27531f(0x1ef)]),this[_0x27531f(0x1d4)](_0x27531f(0x1f8)),setTimeout(()=>this['element'][_0x27531f(0x1e5)](),0x3e8);}}class FloatEffect extends Effect{constructor(_0x165f25,_0x423ca7,_0x2894bc){const _0x29116d=a0_0x45a4e3;super(_0x165f25,_0x423ca7,_0x2894bc,0x1),this[_0x29116d(0x1ef)][_0x29116d(0x1bc)]=_0x29116d(0x1bb);}[a0_0x45a4e3(0x1ad)](){const _0x2a0cd3=a0_0x45a4e3;document['body'][_0x2a0cd3(0x1c7)](this['element']),this[_0x2a0cd3(0x1d4)](_0x2a0cd3(0x21d)),this[_0x2a0cd3(0x1ef)][_0x2a0cd3(0x1bf)][_0x2a0cd3(0x1db)]=_0x2a0cd3(0x1eb),this[_0x2a0cd3(0x1ef)][_0x2a0cd3(0x1bf)]['height']=_0x2a0cd3(0x1eb),this[_0x2a0cd3(0x1ef)][_0x2a0cd3(0x1bf)][_0x2a0cd3(0x21c)]='translateY(0)\x20scale(1)',this[_0x2a0cd3(0x1ef)][_0x2a0cd3(0x1bf)]['opacity']='1',requestAnimationFrame(()=>{const _0x23e6e0=_0x2a0cd3;this[_0x23e6e0(0x1ef)][_0x23e6e0(0x1bf)][_0x23e6e0(0x1ae)]=_0x23e6e0(0x1cf),this[_0x23e6e0(0x1ef)][_0x23e6e0(0x1bf)][_0x23e6e0(0x1db)]=_0x23e6e0(0x1f2),this[_0x23e6e0(0x1ef)][_0x23e6e0(0x1bf)][_0x23e6e0(0x1dd)]=_0x23e6e0(0x1f2),this['element']['style']['transform']='translateY(-100px)',this[_0x23e6e0(0x1ef)][_0x23e6e0(0x1bf)]['opacity']='0';}),setTimeout(()=>this[_0x2a0cd3(0x1ef)][_0x2a0cd3(0x1e5)](),0x7d0);}}class EffectFactory{static[a0_0x45a4e3(0x1b9)](_0x52ac43,_0x7efc49,_0x5bfb4e){const _0x4827c4=a0_0x45a4e3,_0x4b301c=_0x4827c4(0x202)+Math[_0x4827c4(0x1de)]()*0x168+_0x4827c4(0x1bd);switch(_0x52ac43){case _0x4827c4(0x20a):return new RippleEffect(_0x7efc49,_0x5bfb4e,_0x4b301c);case _0x4827c4(0x219):return new PulseEffect(_0x7efc49,_0x5bfb4e,_0x4b301c);case'float':return new FloatEffect(_0x7efc49,_0x5bfb4e,_0x4b301c);case'none':default:return null;}}}function createGazePlot(){const _0x44c851=a0_0x45a4e3,_0x4f043f=document[_0x44c851(0x1d1)](_0x44c851(0x1fd),_0x44c851(0x1e3));_0x4f043f[_0x44c851(0x1f3)](_0x44c851(0x1db),_0x44c851(0x200)),_0x4f043f[_0x44c851(0x1f3)]('height',_0x44c851(0x200)),_0x4f043f[_0x44c851(0x1bf)][_0x44c851(0x1b1)]=_0x44c851(0x214),_0x4f043f[_0x44c851(0x1bf)]['top']='0',_0x4f043f[_0x44c851(0x1bf)][_0x44c851(0x1f5)]='0',_0x4f043f[_0x44c851(0x1bf)]['pointerEvents']='none',document[_0x44c851(0x1c5)][_0x44c851(0x1c7)](_0x4f043f);const _0x2a3cbd=0x3c,_0x31c2e3=0x12c;let _0x503e25=[],_0x9bbe1={'x':positions[0x0]['x'],'y':positions[0x0]['y'],'duration':interval,'points':[positions[0x0]]};for(let _0x2bbc6e=0x1;_0x2bbc6e<positions[_0x44c851(0x205)];_0x2bbc6e++){const _0xb9c41a=positions[_0x2bbc6e],_0x24a6f8=_0xb9c41a['x']-_0x9bbe1['x'],_0x4562c6=_0xb9c41a['y']-_0x9bbe1['y'],_0x3cab74=Math['sqrt'](_0x24a6f8*_0x24a6f8+_0x4562c6*_0x4562c6);_0x3cab74<_0x2a3cbd?(_0x9bbe1[_0x44c851(0x1e1)]['push'](_0xb9c41a),_0x9bbe1[_0x44c851(0x1e9)]+=interval):(_0x9bbe1['duration']>=_0x31c2e3&&_0x503e25['push'](_0x9bbe1),_0x9bbe1={'x':_0xb9c41a['x'],'y':_0xb9c41a['y'],'duration':interval,'points':[_0xb9c41a]});}_0x9bbe1['duration']>=_0x31c2e3&&_0x503e25['push'](_0x9bbe1);let _0x4c49c9=null,_0xcaf485=null;_0x503e25['forEach']((_0x35f2a6,_0x1202a5)=>{const _0x205556=_0x44c851,_0x4daa54=_0x35f2a6[_0x205556(0x1e1)]['reduce']((_0x53e57e,_0x541741)=>_0x53e57e+_0x541741['x'],0x0)/_0x35f2a6[_0x205556(0x1e1)][_0x205556(0x205)],_0x5a9c84=_0x35f2a6[_0x205556(0x1e1)][_0x205556(0x1b3)]((_0x2b1f9a,_0x379ecc)=>_0x2b1f9a+_0x379ecc['y'],0x0)/_0x35f2a6[_0x205556(0x1e1)][_0x205556(0x205)];if(_0x4c49c9!==null&&_0xcaf485!==null){const _0x310db6=document[_0x205556(0x1d1)](_0x205556(0x1fd),'line');_0x310db6[_0x205556(0x1f3)]('x1',_0x4c49c9),_0x310db6['setAttribute']('y1',_0xcaf485),_0x310db6[_0x205556(0x1f3)]('x2',_0x4daa54),_0x310db6[_0x205556(0x1f3)]('y2',_0x5a9c84),_0x310db6[_0x205556(0x1f3)](_0x205556(0x1f7),_0x205556(0x202)+_0x1202a5*0x168/_0x503e25[_0x205556(0x205)]+_0x205556(0x1bd)),_0x310db6[_0x205556(0x1f3)](_0x205556(0x1cb),'2'),_0x4f043f[_0x205556(0x1c7)](_0x310db6);}const _0x15f132=document[_0x205556(0x1d1)](_0x205556(0x1fd),_0x205556(0x20c));_0x15f132['setAttribute']('cx',_0x4daa54),_0x15f132[_0x205556(0x1f3)]('cy',_0x5a9c84),_0x15f132[_0x205556(0x1f3)]('r',Math['log2'](_0x35f2a6[_0x205556(0x1e9)]/ interval)*0x5),_0x15f132[_0x205556(0x1f3)](_0x205556(0x1f7),_0x205556(0x222)),_0x15f132['setAttribute'](_0x205556(0x1cb),'4'),_0x15f132[_0x205556(0x1f3)](_0x205556(0x1fe),_0x205556(0x202)+_0x1202a5*0x168/_0x503e25[_0x205556(0x205)]+_0x205556(0x1bd)),_0x15f132[_0x205556(0x1f3)](_0x205556(0x1f1),'0.75'),_0x4f043f['appendChild'](_0x15f132);const _0x4b7c2c=document[_0x205556(0x1d1)](_0x205556(0x1fd),_0x205556(0x1f0));_0x4b7c2c[_0x205556(0x1f3)]('x',_0x4daa54+0xf),_0x4b7c2c['setAttribute']('y',_0x5a9c84-0xf),durationTime=Math[_0x205556(0x20e)](_0x35f2a6[_0x205556(0x1e9)]),_0x4b7c2c[_0x205556(0x1da)]=durationTime+'ms',_0x4b7c2c[_0x205556(0x1f3)](_0x205556(0x1fe),'white'),_0x4b7c2c[_0x205556(0x1f3)]('font-size',_0x205556(0x210)),_0x4f043f['appendChild'](_0x4b7c2c),_0x4c49c9=_0x4daa54,_0xcaf485=_0x5a9c84;const _0x1a9171=document[_0x205556(0x1d1)](_0x205556(0x1fd),_0x205556(0x1f0));_0x1a9171[_0x205556(0x1f3)]('x',_0x4daa54+0x5),_0x1a9171[_0x205556(0x1f3)]('y',_0x5a9c84+0x5),_0x1a9171[_0x205556(0x1da)]=_0x1202a5+0x1,_0x1a9171[_0x205556(0x1f3)]('fill',_0x205556(0x222)),_0x1a9171['setAttribute'](_0x205556(0x1c9),'15px'),_0x4f043f[_0x205556(0x1c7)](_0x1a9171);});}startButton[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1fc),startTracking),resetBackgroundButton[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1fc),resetBackground),clearHeatmapButton[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1fc),clearHeatmap),exportButton['addEventListener'](a0_0x45a4e3(0x1fc),exportHeatmap),backgroundInput['addEventListener'](a0_0x45a4e3(0x1aa),setBackgroundImage),document[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1d0),trackMouseMovement),document[a0_0x45a4e3(0x221)]('mousemove',_0x3bdffb=>{const _0x9d765=a0_0x45a4e3;lastKnownMousePosition['x']=_0x3bdffb[_0x9d765(0x1b2)],lastKnownMousePosition['y']=_0x3bdffb[_0x9d765(0x1d6)];}),window[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1ec),()=>heatmap[a0_0x45a4e3(0x1ec)]()),volumeControl[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x21a),function(){const _0x20318f=a0_0x45a4e3,_0x3c502a=this[_0x20318f(0x1e6)];document[_0x20318f(0x1ba)](_0x20318f(0x1ac))['volume']=_0x3c502a,document[_0x20318f(0x1ba)](_0x20318f(0x1df))[_0x20318f(0x1ee)]=_0x3c502a;}),document[a0_0x45a4e3(0x1ba)](a0_0x45a4e3(0x21b))[a0_0x45a4e3(0x221)](a0_0x45a4e3(0x1fc),createGazePlot);function startTracking(){const _0x24ff18=a0_0x45a4e3;if(isTracking)return;const _0x2e36c2=parseInt(durationInput['value']);if(isNaN(_0x2e36c2)||_0x2e36c2<0x1||_0x2e36c2>0x3c){alert(_0x24ff18(0x1d7));return;}Effect[_0x24ff18(0x1ca)](),clearHeatmap(),isTracking=!![],controlPanel['classList'][_0x24ff18(0x20b)](_0x24ff18(0x218)),disableControls(!![]),startButton[_0x24ff18(0x1da)]=_0x24ff18(0x1c6),trackingTimer=setTimeout(endTracking,_0x2e36c2*0x3e8),updateMousePosition();}function endTracking(){const _0x467b3d=a0_0x45a4e3;isTracking=![],heatmap[_0x467b3d(0x1c1)]({'max':0x1,'data':positions}),controlPanel[_0x467b3d(0x204)][_0x467b3d(0x1e5)](_0x467b3d(0x218)),disableControls(![]),startButton[_0x467b3d(0x1da)]=_0x467b3d(0x1b0);}function resetBackground(){const _0x4c9bce=a0_0x45a4e3;document['body'][_0x4c9bce(0x1bf)][_0x4c9bce(0x1d2)]='none',document[_0x4c9bce(0x1c5)]['style'][_0x4c9bce(0x201)]=_0x4c9bce(0x1dc),backgroundInput['value']='';}function clearHeatmap(){const _0x3e5bcc=a0_0x45a4e3;heatmap[_0x3e5bcc(0x1c1)]({'max':0x1,'data':[]}),positions=[];}function exportHeatmap(){controlPanel['classList']['add']('hidden'),setTimeout(()=>{const _0x128904=a0_0x2bdc;html2canvas(document['body'],{'width':document[_0x128904(0x1c5)][_0x128904(0x213)],'height':document[_0x128904(0x1c5)][_0x128904(0x1ff)],'scale':0x1,'useCORS':!![]})['then'](_0x236fa6=>{const _0xa32b0a=_0x128904,_0x4623c4=_0x236fa6[_0xa32b0a(0x1ab)](_0xa32b0a(0x1e4))[_0xa32b0a(0x1c8)](_0xa32b0a(0x1e4),_0xa32b0a(0x1b6)),_0x4222d2=document[_0xa32b0a(0x1c0)]('a');_0x4222d2['download']=_0xa32b0a(0x21f),_0x4222d2[_0xa32b0a(0x1ce)]=_0x4623c4,_0x4222d2[_0xa32b0a(0x1fc)](),controlPanel['classList'][_0xa32b0a(0x1e5)](_0xa32b0a(0x218));});},0x12c);}function setBackgroundImage(_0xbeba76){const _0x1056fa=a0_0x45a4e3,_0x874b05=_0xbeba76[_0x1056fa(0x1d8)][_0x1056fa(0x212)][0x0];if(_0x874b05){const _0x756a25=new FileReader();_0x756a25[_0x1056fa(0x203)]=function(_0x3cb1f4){const _0x32d669=_0x1056fa;document['body']['style'][_0x32d669(0x1d2)]=_0x32d669(0x1be)+_0x3cb1f4[_0x32d669(0x1d8)][_0x32d669(0x1fb)]+'\x27)';},_0x756a25[_0x1056fa(0x1f9)](_0x874b05);}else resetBackground();}function trackMouseMovement(_0x3c7b87){const _0x239303=a0_0x45a4e3;if(!isTracking)return;const _0x527eb6=performance[_0x239303(0x1e2)](),_0x267f8f=performance[_0x239303(0x1e2)]();_0x527eb6-lastMoveTime>interval&&(lastMoveTime=_0x527eb6);if(_0x267f8f-lastMoveTimeForEffects>0x64){console[_0x239303(0x220)]('effect'),lastMoveTimeForEffects=_0x267f8f;const _0x44c28e=effectSelect[_0x239303(0x1e6)],_0x482742=EffectFactory[_0x239303(0x1b9)](_0x44c28e,_0x3c7b87[_0x239303(0x1b2)],_0x3c7b87[_0x239303(0x1d6)]);_0x482742&&_0x482742[_0x239303(0x1ad)]();}}function updateMousePosition(){const _0x2c64d0=a0_0x45a4e3;if(!isTracking)return;positions[_0x2c64d0(0x1e8)]({'x':lastKnownMousePosition['x'],'y':lastKnownMousePosition['y'],'value':0x1}),setTimeout(updateMousePosition,interval);}function a0_0x2bdc(_0x42f530,_0x505354){const _0x3a89ab=a0_0x3a89();return a0_0x2bdc=function(_0x2bdc67,_0x22422b){_0x2bdc67=_0x2bdc67-0x1aa;let _0x490371=_0x3a89ab[_0x2bdc67];return _0x490371;},a0_0x2bdc(_0x42f530,_0x505354);}function disableControls(_0x282f9d){const _0x56c326=a0_0x45a4e3;startButton[_0x56c326(0x1fa)]=_0x282f9d,durationInput['disabled']=_0x282f9d,backgroundInput[_0x56c326(0x1fa)]=_0x282f9d,resetBackgroundButton[_0x56c326(0x1fa)]=_0x282f9d,clearHeatmapButton[_0x56c326(0x1fa)]=_0x282f9d,exportButton['disabled']=_0x282f9d,effectSelect['disabled']=_0x282f9d;}