const a0_0x558ab7=a0_0x1e67;(function(_0x576a15,_0x52bc5){const _0xd8991=a0_0x1e67,_0x286081=_0x576a15();while(!![]){try{const _0x20a57f=-parseInt(_0xd8991(0xf3))/0x1+parseInt(_0xd8991(0x102))/0x2+parseInt(_0xd8991(0xb5))/0x3+-parseInt(_0xd8991(0xde))/0x4*(-parseInt(_0xd8991(0xa7))/0x5)+parseInt(_0xd8991(0xb2))/0x6*(-parseInt(_0xd8991(0xc9))/0x7)+parseInt(_0xd8991(0xcd))/0x8*(parseInt(_0xd8991(0xca))/0x9)+-parseInt(_0xd8991(0x11a))/0xa;if(_0x20a57f===_0x52bc5)break;else _0x286081['push'](_0x286081['shift']());}catch(_0x19009a){_0x286081['push'](_0x286081['shift']());}}}(a0_0x26aa,0xc24b0));let heatmap,isTracking=![],lastMoveTime=0x0,lastMoveTimeForEffects=0x0,positions=[],trackingTimer,lastKnownMousePosition={'x':0x0,'y':0x0};const interval=0x3e8/0x3c,controlPanel=document['getElementById']('controlPanel'),startButton=document[a0_0x558ab7(0xd9)](a0_0x558ab7(0x10f)),durationInput=document[a0_0x558ab7(0xd9)](a0_0x558ab7(0x122)),backgroundInput=document[a0_0x558ab7(0xd9)]('backgroundInput'),resetBackgroundButton=document['getElementById'](a0_0x558ab7(0x121)),clearHeatmapButton=document[a0_0x558ab7(0xd9)](a0_0x558ab7(0xd7)),exportButton=document[a0_0x558ab7(0xd9)]('exportButton'),effectSelect=document[a0_0x558ab7(0xd9)](a0_0x558ab7(0xbf)),volumeControl=document[a0_0x558ab7(0xd9)](a0_0x558ab7(0x120));heatmap=h337[a0_0x558ab7(0x119)]({'container':document[a0_0x558ab7(0xd9)](a0_0x558ab7(0xe1)),'maxOpacity':0.6,'radius':0x32,'blur':0.9,'backgroundColor':a0_0x558ab7(0xdc)});class Effect{static [a0_0x558ab7(0xc8)]=null;static [a0_0x558ab7(0xfb)]=null;static['initAudioContext'](){const _0x3e30b1=a0_0x558ab7;!Effect[_0x3e30b1(0xc8)]&&(Effect[_0x3e30b1(0xc8)]=new(window[(_0x3e30b1(0xf1))]||window[(_0x3e30b1(0x117))])(),Effect[_0x3e30b1(0xc8)][_0x3e30b1(0xbc)]===_0x3e30b1(0xcb)&&Effect[_0x3e30b1(0xc8)]['resume']());}constructor(_0x596a11,_0x20ca4e,_0x496116,_0x167f27=0x1){const _0x2bae35=a0_0x558ab7;this[_0x2bae35(0xbd)]=document[_0x2bae35(0x100)](_0x2bae35(0xf0)),this['element'][_0x2bae35(0x10a)][_0x2bae35(0xc5)]=_0x2bae35(0xe2),this[_0x2bae35(0xbd)]['style'][_0x2bae35(0x125)]=_0x596a11-0xa+'px',this[_0x2bae35(0xbd)][_0x2bae35(0x10a)][_0x2bae35(0x11b)]=_0x20ca4e-0xa+'px',this['element'][_0x2bae35(0x10a)]['backgroundColor']=_0x496116,this[_0x2bae35(0xf5)]=_0x167f27;}async['playSound'](_0x1ce753){const _0x548940=a0_0x558ab7;!Effect['audioContext']&&Effect[_0x548940(0xc4)]();if(Effect[_0x548940(0xfb)])return;try{const _0x493dc7=await fetch(_0x1ce753),_0xfe795a=await _0x493dc7['arrayBuffer'](),_0x13b7a4=await Effect[_0x548940(0xc8)][_0x548940(0xd8)](_0xfe795a),_0x459f1b=Effect['audioContext'][_0x548940(0x11c)]();_0x459f1b['buffer']=_0x13b7a4,_0x459f1b[_0x548940(0xf5)]['value']=this[_0x548940(0xf5)],_0x459f1b[_0x548940(0xd2)](Effect[_0x548940(0xc8)][_0x548940(0x113)]),Effect[_0x548940(0xfb)]=_0x459f1b,_0x459f1b[_0x548940(0xa6)]=()=>{const _0x31f40a=_0x548940;Effect[_0x31f40a(0xfb)]=null;},_0x459f1b[_0x548940(0xba)]();}catch(_0x12e75b){console[_0x548940(0xa9)](_0x548940(0xd1),_0x12e75b);}}}class RippleEffect extends Effect{constructor(_0x10e5e8,_0x4dc775,_0x129c5b){const _0x13ca72=a0_0x558ab7;super(_0x10e5e8,_0x4dc775,_0x129c5b,1.5),this['element'][_0x13ca72(0xf6)]=_0x13ca72(0x123);}[a0_0x558ab7(0x10b)](){const _0x1b058a=a0_0x558ab7;document[_0x1b058a(0x11d)][_0x1b058a(0xbb)](this['element']),this[_0x1b058a(0xc1)](_0x1b058a(0xc7)),setTimeout(()=>this['element'][_0x1b058a(0x10e)](),0x4e20);}}class PulseEffect extends Effect{constructor(_0x52798d,_0x5bf6d6,_0x46012b){const _0x539316=a0_0x558ab7;super(_0x52798d,_0x5bf6d6,_0x46012b,0x2),this[_0x539316(0xbd)]['className']=_0x539316(0xf9);}['animate'](){const _0x371ecf=a0_0x558ab7;document[_0x371ecf(0x11d)]['appendChild'](this[_0x371ecf(0xbd)]),this[_0x371ecf(0xc1)](_0x371ecf(0xc7)),setTimeout(()=>this[_0x371ecf(0xbd)][_0x371ecf(0x10e)](),0x3e8);}}class FloatEffect extends Effect{constructor(_0x5d2594,_0x29b88b,_0x42a07e){const _0x4119f2=a0_0x558ab7;super(_0x5d2594,_0x29b88b,_0x42a07e,0x1),this[_0x4119f2(0xbd)][_0x4119f2(0xf6)]=_0x4119f2(0xfa);}['animate'](){const _0xee1065=a0_0x558ab7;document[_0xee1065(0x11d)][_0xee1065(0xbb)](this[_0xee1065(0xbd)]),this[_0xee1065(0xc1)]('sounds/short_float.mp3'),this[_0xee1065(0xbd)]['style'][_0xee1065(0xaf)]=_0xee1065(0x108),this[_0xee1065(0xbd)][_0xee1065(0x10a)]['height']='20px',this[_0xee1065(0xbd)][_0xee1065(0x10a)][_0xee1065(0xc2)]=_0xee1065(0xab),this[_0xee1065(0xbd)][_0xee1065(0x10a)][_0xee1065(0xd3)]='1',requestAnimationFrame(()=>{const _0x9cbe81=_0xee1065;this[_0x9cbe81(0xbd)][_0x9cbe81(0x10a)][_0x9cbe81(0x118)]=_0x9cbe81(0x115),this['element'][_0x9cbe81(0x10a)][_0x9cbe81(0xaf)]=_0x9cbe81(0x11f),this['element'][_0x9cbe81(0x10a)][_0x9cbe81(0xb8)]=_0x9cbe81(0x11f),this[_0x9cbe81(0xbd)][_0x9cbe81(0x10a)]['transform']='translateY(-100px)',this['element']['style'][_0x9cbe81(0xd3)]='0';}),setTimeout(()=>this['element'][_0xee1065(0x10e)](),0x7d0);}}class EffectFactory{static[a0_0x558ab7(0xff)](_0x3502a0,_0x206eec,_0x30cddb){const _0xb5806b=a0_0x558ab7,_0x326c07=_0xb5806b(0xdd)+Math[_0xb5806b(0xda)]()*0x168+_0xb5806b(0xe5);switch(_0x3502a0){case _0xb5806b(0x123):return new RippleEffect(_0x206eec,_0x30cddb,_0x326c07);case'pulse':return new PulseEffect(_0x206eec,_0x30cddb,_0x326c07);case _0xb5806b(0xfa):return new FloatEffect(_0x206eec,_0x30cddb,_0x326c07);case _0xb5806b(0xb4):default:return null;}}}function createGazePlot(){const _0x2985d5=a0_0x558ab7,_0x494c01=document[_0x2985d5(0xd5)](_0x2985d5(0xd6),_0x2985d5(0xe9));_0x494c01[_0x2985d5(0xd0)](_0x2985d5(0xaf),_0x2985d5(0xe0)),_0x494c01[_0x2985d5(0xd0)](_0x2985d5(0xb8),'100%'),_0x494c01['style'][_0x2985d5(0xc5)]=_0x2985d5(0xe2),_0x494c01[_0x2985d5(0x10a)][_0x2985d5(0x11b)]='0',_0x494c01[_0x2985d5(0x10a)][_0x2985d5(0x125)]='0',_0x494c01[_0x2985d5(0x10a)][_0x2985d5(0xe4)]=_0x2985d5(0xb4),document['body']['appendChild'](_0x494c01);const _0x5c2e67=0x73,_0x5f2f1a=0xc8;let _0x2430fb=[],_0x2376c3={'x':positions[0x0]['x'],'y':positions[0x0]['y'],'duration':interval,'points':[positions[0x0]]};for(let _0x46baaf=0x1;_0x46baaf<positions[_0x2985d5(0xe6)];_0x46baaf++){const _0x289622=positions[_0x46baaf],_0x38d8d2=_0x289622['x']-_0x2376c3['x'],_0x49cf2c=_0x289622['y']-_0x2376c3['y'],_0x1ac259=Math[_0x2985d5(0xad)](_0x38d8d2*_0x38d8d2+_0x49cf2c*_0x49cf2c);_0x1ac259<_0x5c2e67?(_0x2376c3[_0x2985d5(0xaa)]['push'](_0x289622),_0x2376c3['duration']+=interval):(_0x2376c3[_0x2985d5(0xdf)]>=_0x5f2f1a&&_0x2430fb[_0x2985d5(0xb0)](_0x2376c3),_0x2376c3={'x':_0x289622['x'],'y':_0x289622['y'],'duration':interval,'points':[_0x289622]});}_0x2376c3[_0x2985d5(0xdf)]>=_0x5f2f1a&&_0x2430fb[_0x2985d5(0xb0)](_0x2376c3);let _0x51302e=null,_0x1da14c=null;_0x2430fb['forEach']((_0x110521,_0x3b5246)=>{const _0xf4cc4d=_0x2985d5,_0x3a5ded=_0x110521[_0xf4cc4d(0xaa)][_0xf4cc4d(0xc3)]((_0x3b405c,_0xe85611)=>_0x3b405c+_0xe85611['x'],0x0)/_0x110521[_0xf4cc4d(0xaa)][_0xf4cc4d(0xe6)],_0x7f335f=_0x110521['points']['reduce']((_0x23f2e5,_0xa8871b)=>_0x23f2e5+_0xa8871b['y'],0x0)/_0x110521['points']['length'],_0x5324a9=document[_0xf4cc4d(0xd5)]('http://www.w3.org/2000/svg',_0xf4cc4d(0xf2));_0x5324a9[_0xf4cc4d(0xd0)]('cx',_0x3a5ded),_0x5324a9[_0xf4cc4d(0xd0)]('cy',_0x7f335f),_0x5324a9['setAttribute']('r',Math[_0xf4cc4d(0xb1)](_0x110521[_0xf4cc4d(0xdf)]/ interval)*0x4),_0x5324a9[_0xf4cc4d(0xd0)](_0xf4cc4d(0xac),_0xf4cc4d(0xdd)+_0x3b5246*0x168/_0x2430fb[_0xf4cc4d(0xe6)]+',\x20100%,\x2050%)'),_0x494c01['appendChild'](_0x5324a9);const _0x2f232f=document[_0xf4cc4d(0xd5)]('http://www.w3.org/2000/svg','text');_0x2f232f[_0xf4cc4d(0xd0)]('x',_0x3a5ded+0xf),_0x2f232f[_0xf4cc4d(0xd0)]('y',_0x7f335f-0xf),durationTime=Math[_0xf4cc4d(0xc0)](_0x110521[_0xf4cc4d(0xdf)]),_0x2f232f[_0xf4cc4d(0xb9)]=durationTime+'ms',_0x2f232f[_0xf4cc4d(0xd0)](_0xf4cc4d(0xac),_0xf4cc4d(0x116)),_0x2f232f['setAttribute'](_0xf4cc4d(0xd4),_0xf4cc4d(0xcf)),_0x494c01['appendChild'](_0x2f232f);if(_0x51302e!==null&&_0x1da14c!==null){const _0x1660b=document[_0xf4cc4d(0xd5)](_0xf4cc4d(0xd6),_0xf4cc4d(0x10c));_0x1660b[_0xf4cc4d(0xd0)]('x1',_0x51302e),_0x1660b[_0xf4cc4d(0xd0)]('y1',_0x1da14c),_0x1660b[_0xf4cc4d(0xd0)]('x2',_0x3a5ded),_0x1660b[_0xf4cc4d(0xd0)]('y2',_0x7f335f),_0x1660b['setAttribute'](_0xf4cc4d(0x10d),'hsl('+_0x3b5246*0x168/_0x2430fb[_0xf4cc4d(0xe6)]+_0xf4cc4d(0xe5)),_0x1660b['setAttribute'](_0xf4cc4d(0x104),'2'),_0x494c01['appendChild'](_0x1660b);}_0x51302e=_0x3a5ded,_0x1da14c=_0x7f335f;const _0x6043ec=document[_0xf4cc4d(0xd5)](_0xf4cc4d(0xd6),'text');_0x6043ec[_0xf4cc4d(0xd0)]('x',_0x3a5ded+0x5),_0x6043ec['setAttribute']('y',_0x7f335f+0x5),_0x6043ec[_0xf4cc4d(0xb9)]=_0x3b5246+0x1,_0x6043ec[_0xf4cc4d(0xd0)]('fill',_0xf4cc4d(0x116)),_0x6043ec[_0xf4cc4d(0xd0)](_0xf4cc4d(0xd4),_0xf4cc4d(0xed)),_0x494c01[_0xf4cc4d(0xbb)](_0x6043ec);});}function a0_0x26aa(){const _0x1a9b9e=['rgba(0,\x200,\x200,\x200)','hsl(','60CBEqgU','duration','100%','heatmapContainer','absolute','then','pointerEvents',',\x20100%,\x2050%)','length','addEventListener','rippleSound','svg','change','onload','pageX','10px','backgroundColor','pageY','div','AudioContext','circle','1509731AZXlDQ','href','playbackRate','className','scrollHeight','Start\x20Tracking','pulse','float','currentSound','click','image/png','setData','createEffect','createElement','input','3166494DSJptK','resize','stroke-width','mousemove','hidden','image/octet-stream','20px','toDataURL','style','animate','line','stroke','remove','startButton','now','disabled','classList','destination','readAsDataURL','all\x202s\x20ease-out','white','webkitAudioContext','transition','create','21825000BgjnmZ','top','createBufferSource','body','target','60px','volumeControl','resetBackgroundButton','durationInput','ripple','url(\x27','left','showGazePlotButton','heatmap_export.png','onended','511340fXQsDs','result','error','points','translateY(0)\x20scale(1)','fill','sqrt','add','width','push','log2','414DFANyL','backgroundImage','none','2423292tNtFZv','download','files','height','textContent','start','appendChild','state','element','value','effectSelect','round','playSound','transform','reduce','initAudioContext','position','log','sounds/fuwa.mp3','audioContext','90377QrOIEG','9GNhlpK','suspended','scrollWidth','11631064MeOAqa','replace','12px','setAttribute','Error\x20playing\x20sound:','connect','opacity','font-size','createElementNS','http://www.w3.org/2000/svg','clearHeatmapButton','decodeAudioData','getElementById','random','volume'];a0_0x26aa=function(){return _0x1a9b9e;};return a0_0x26aa();}startButton['addEventListener'](a0_0x558ab7(0xfc),startTracking),resetBackgroundButton[a0_0x558ab7(0xe7)](a0_0x558ab7(0xfc),resetBackground),clearHeatmapButton['addEventListener'](a0_0x558ab7(0xfc),clearHeatmap),exportButton[a0_0x558ab7(0xe7)](a0_0x558ab7(0xfc),exportHeatmap),backgroundInput[a0_0x558ab7(0xe7)](a0_0x558ab7(0xea),setBackgroundImage),document['addEventListener'](a0_0x558ab7(0x105),trackMouseMovement),document[a0_0x558ab7(0xe7)](a0_0x558ab7(0x105),_0x1a4ed7=>{const _0x202959=a0_0x558ab7;lastKnownMousePosition['x']=_0x1a4ed7[_0x202959(0xec)],lastKnownMousePosition['y']=_0x1a4ed7['pageY'];}),window[a0_0x558ab7(0xe7)](a0_0x558ab7(0x103),()=>heatmap[a0_0x558ab7(0x103)]()),volumeControl[a0_0x558ab7(0xe7)](a0_0x558ab7(0x101),function(){const _0x44fc01=a0_0x558ab7,_0x28556c=this[_0x44fc01(0xbe)];document[_0x44fc01(0xd9)](_0x44fc01(0xe8))[_0x44fc01(0xdb)]=_0x28556c,document['getElementById']('pulseSound')['volume']=_0x28556c;}),document[a0_0x558ab7(0xd9)](a0_0x558ab7(0x126))['addEventListener'](a0_0x558ab7(0xfc),createGazePlot);function startTracking(){const _0x3d9d0a=a0_0x558ab7;if(isTracking)return;const _0x1d81ab=parseInt(durationInput[_0x3d9d0a(0xbe)]);if(isNaN(_0x1d81ab)||_0x1d81ab<0x1||_0x1d81ab>0x3c){alert('Please\x20enter\x20a\x20valid\x20duration\x20between\x201\x20and\x2060\x20seconds.');return;}Effect[_0x3d9d0a(0xc4)](),clearHeatmap(),isTracking=!![],controlPanel[_0x3d9d0a(0x112)][_0x3d9d0a(0xae)](_0x3d9d0a(0x106)),disableControls(!![]),startButton[_0x3d9d0a(0xb9)]='Tracking...',trackingTimer=setTimeout(endTracking,_0x1d81ab*0x3e8),updateMousePosition();}function a0_0x1e67(_0x540762,_0x370528){const _0x26aa83=a0_0x26aa();return a0_0x1e67=function(_0x1e6754,_0x537a4f){_0x1e6754=_0x1e6754-0xa5;let _0x4631ee=_0x26aa83[_0x1e6754];return _0x4631ee;},a0_0x1e67(_0x540762,_0x370528);}function endTracking(){const _0x4ac791=a0_0x558ab7;isTracking=![],heatmap[_0x4ac791(0xfe)]({'max':0x1,'data':positions}),controlPanel[_0x4ac791(0x112)]['remove'](_0x4ac791(0x106)),disableControls(![]),startButton[_0x4ac791(0xb9)]=_0x4ac791(0xf8);}function resetBackground(){const _0x5c8afb=a0_0x558ab7;document[_0x5c8afb(0x11d)][_0x5c8afb(0x10a)][_0x5c8afb(0xb3)]=_0x5c8afb(0xb4),document[_0x5c8afb(0x11d)][_0x5c8afb(0x10a)][_0x5c8afb(0xee)]='black',backgroundInput[_0x5c8afb(0xbe)]='';}function clearHeatmap(){const _0x27ff2e=a0_0x558ab7;heatmap[_0x27ff2e(0xfe)]({'max':0x1,'data':[]}),positions=[];}function exportHeatmap(){const _0x309d1c=a0_0x558ab7;controlPanel['classList'][_0x309d1c(0xae)](_0x309d1c(0x106)),setTimeout(()=>{const _0x10fb3f=_0x309d1c;html2canvas(document[_0x10fb3f(0x11d)],{'width':document[_0x10fb3f(0x11d)][_0x10fb3f(0xcc)],'height':document['body'][_0x10fb3f(0xf7)],'scale':0x1,'useCORS':!![]})[_0x10fb3f(0xe3)](_0x1e1667=>{const _0x26dc10=_0x10fb3f,_0x53ee72=_0x1e1667[_0x26dc10(0x109)]('image/png')[_0x26dc10(0xce)](_0x26dc10(0xfd),_0x26dc10(0x107)),_0x4b2f9b=document[_0x26dc10(0x100)]('a');_0x4b2f9b[_0x26dc10(0xb6)]=_0x26dc10(0xa5),_0x4b2f9b[_0x26dc10(0xf4)]=_0x53ee72,_0x4b2f9b['click'](),controlPanel['classList'][_0x26dc10(0x10e)](_0x26dc10(0x106));});},0x12c);}function setBackgroundImage(_0x5acd3a){const _0xf72cc1=a0_0x558ab7,_0x52f7b1=_0x5acd3a['target'][_0xf72cc1(0xb7)][0x0];if(_0x52f7b1){const _0x4d4164=new FileReader();_0x4d4164[_0xf72cc1(0xeb)]=function(_0xd950b5){const _0x52eae7=_0xf72cc1;document[_0x52eae7(0x11d)][_0x52eae7(0x10a)][_0x52eae7(0xb3)]=_0x52eae7(0x124)+_0xd950b5[_0x52eae7(0x11e)][_0x52eae7(0xa8)]+'\x27)';},_0x4d4164[_0xf72cc1(0x114)](_0x52f7b1);}else resetBackground();}function trackMouseMovement(_0x2b7482){const _0x43c381=a0_0x558ab7;if(!isTracking)return;const _0x354d31=performance[_0x43c381(0x110)](),_0x3b1d1b=performance[_0x43c381(0x110)]();_0x354d31-lastMoveTime>interval&&(lastMoveTime=_0x354d31);if(_0x3b1d1b-lastMoveTimeForEffects>0x64){console[_0x43c381(0xc6)]('effect'),lastMoveTimeForEffects=_0x3b1d1b;const _0x2e18b5=effectSelect['value'],_0x267f72=EffectFactory[_0x43c381(0xff)](_0x2e18b5,_0x2b7482[_0x43c381(0xec)],_0x2b7482[_0x43c381(0xef)]);_0x267f72&&_0x267f72[_0x43c381(0x10b)]();}}function updateMousePosition(){if(!isTracking)return;positions['push']({'x':lastKnownMousePosition['x'],'y':lastKnownMousePosition['y'],'value':0x1}),setTimeout(updateMousePosition,interval);}function disableControls(_0xda7b4c){const _0x4b53db=a0_0x558ab7;startButton[_0x4b53db(0x111)]=_0xda7b4c,durationInput['disabled']=_0xda7b4c,backgroundInput[_0x4b53db(0x111)]=_0xda7b4c,resetBackgroundButton[_0x4b53db(0x111)]=_0xda7b4c,clearHeatmapButton[_0x4b53db(0x111)]=_0xda7b4c,exportButton['disabled']=_0xda7b4c,effectSelect['disabled']=_0xda7b4c;}