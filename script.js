const a0_0x7ecbb7=a0_0x359c;(function(_0x1cd56f,_0x23979a){const _0x5b47c8=a0_0x359c,_0x82a6d8=_0x1cd56f();while(!![]){try{const _0x6f711c=-parseInt(_0x5b47c8(0xde))/0x1+-parseInt(_0x5b47c8(0x11d))/0x2*(parseInt(_0x5b47c8(0xf0))/0x3)+parseInt(_0x5b47c8(0xfd))/0x4+parseInt(_0x5b47c8(0x122))/0x5*(-parseInt(_0x5b47c8(0x106))/0x6)+parseInt(_0x5b47c8(0x151))/0x7*(-parseInt(_0x5b47c8(0xed))/0x8)+parseInt(_0x5b47c8(0x137))/0x9+parseInt(_0x5b47c8(0xee))/0xa;if(_0x6f711c===_0x23979a)break;else _0x82a6d8['push'](_0x82a6d8['shift']());}catch(_0x1049b6){_0x82a6d8['push'](_0x82a6d8['shift']());}}}(a0_0x2f99,0xabe32));let heatmap,isTracking=![],lastMoveTime=0x0,lastMoveTimeForEffects=0x0,positions=[],trackingTimer,lastKnownMousePosition={'x':0x0,'y':0x0};const interval=0x3e8/0x3c,controlPanel=document[a0_0x7ecbb7(0x103)](a0_0x7ecbb7(0x148)),startButton=document[a0_0x7ecbb7(0x103)](a0_0x7ecbb7(0x138)),durationInput=document['getElementById'](a0_0x7ecbb7(0x140)),backgroundInput=document['getElementById'](a0_0x7ecbb7(0xf6)),resetBackgroundButton=document[a0_0x7ecbb7(0x103)](a0_0x7ecbb7(0x12d)),clearHeatmapButton=document[a0_0x7ecbb7(0x103)]('clearHeatmapButton'),exportButton=document[a0_0x7ecbb7(0x103)]('exportButton'),effectSelect=document[a0_0x7ecbb7(0x103)]('effectSelect'),volumeControl=document[a0_0x7ecbb7(0x103)]('volumeControl');heatmap=h337[a0_0x7ecbb7(0xf4)]({'container':document[a0_0x7ecbb7(0x103)](a0_0x7ecbb7(0x11b)),'maxOpacity':0.6,'radius':0x32,'blur':0.9,'backgroundColor':a0_0x7ecbb7(0x131)});class Effect{static [a0_0x7ecbb7(0xdb)]=null;static [a0_0x7ecbb7(0x134)]=null;static[a0_0x7ecbb7(0x11f)](){const _0x32df10=a0_0x7ecbb7;!Effect[_0x32df10(0xdb)]&&(Effect['audioContext']=new(window[(_0x32df10(0x10b))]||window[(_0x32df10(0x12b))])(),Effect[_0x32df10(0xdb)][_0x32df10(0xf9)]==='suspended'&&Effect[_0x32df10(0xdb)][_0x32df10(0x13a)]());}constructor(_0x570c3a,_0x2357b4,_0x2badc8,_0x8850dd=0x1){const _0x2268d0=a0_0x7ecbb7;this[_0x2268d0(0xf5)]=document[_0x2268d0(0x115)]('div'),this[_0x2268d0(0xf5)][_0x2268d0(0x136)]['position']=_0x2268d0(0x146),this[_0x2268d0(0xf5)][_0x2268d0(0x136)][_0x2268d0(0x14a)]=_0x570c3a-0xa+'px',this['element']['style'][_0x2268d0(0xec)]=_0x2357b4-0xa+'px',this['element'][_0x2268d0(0x136)][_0x2268d0(0xfc)]=_0x2badc8,this['playbackRate']=_0x8850dd;}async[a0_0x7ecbb7(0x101)](_0x41fb12){const _0x22f9fe=a0_0x7ecbb7;!Effect[_0x22f9fe(0xdb)]&&Effect[_0x22f9fe(0x11f)]();if(Effect['currentSound'])return;try{const _0x2651fc=await fetch(_0x41fb12),_0x540030=await _0x2651fc[_0x22f9fe(0x14b)](),_0x5bed2d=await Effect[_0x22f9fe(0xdb)][_0x22f9fe(0x14c)](_0x540030),_0x5c84a4=Effect['audioContext'][_0x22f9fe(0xe2)]();_0x5c84a4[_0x22f9fe(0x150)]=_0x5bed2d,_0x5c84a4[_0x22f9fe(0xdc)][_0x22f9fe(0xfa)]=this[_0x22f9fe(0xdc)],_0x5c84a4['connect'](Effect[_0x22f9fe(0xdb)]['destination']),Effect[_0x22f9fe(0x134)]=_0x5c84a4,_0x5c84a4[_0x22f9fe(0x112)]=()=>{Effect['currentSound']=null;},_0x5c84a4[_0x22f9fe(0xe4)]();}catch(_0x592db9){console[_0x22f9fe(0x143)](_0x22f9fe(0xe3),_0x592db9);}}}class RippleEffect extends Effect{constructor(_0x5571d4,_0x5a9d08,_0x56a075){const _0x488ddb=a0_0x7ecbb7;super(_0x5571d4,_0x5a9d08,_0x56a075,1.5),this['element'][_0x488ddb(0x11a)]='ripple';}[a0_0x7ecbb7(0x10f)](){const _0x197336=a0_0x7ecbb7;document[_0x197336(0x154)][_0x197336(0x107)](this[_0x197336(0xf5)]),this[_0x197336(0x101)]('sounds/fuwa.mp3'),setTimeout(()=>this['element']['remove'](),0x4e20);}}class PulseEffect extends Effect{constructor(_0x451c90,_0x2cf7bf,_0x1f0416){const _0x14c8d5=a0_0x7ecbb7;super(_0x451c90,_0x2cf7bf,_0x1f0416,0x2),this['element'][_0x14c8d5(0x11a)]=_0x14c8d5(0x113);}[a0_0x7ecbb7(0x10f)](){const _0x3f8f63=a0_0x7ecbb7;document['body'][_0x3f8f63(0x107)](this['element']),this[_0x3f8f63(0x101)]('sounds/fuwa.mp3'),setTimeout(()=>this[_0x3f8f63(0xf5)][_0x3f8f63(0x13f)](),0x3e8);}}class FloatEffect extends Effect{constructor(_0x287294,_0xafa7ab,_0xcbd4bf){const _0x46302e=a0_0x7ecbb7;super(_0x287294,_0xafa7ab,_0xcbd4bf,0x1),this[_0x46302e(0xf5)][_0x46302e(0x11a)]=_0x46302e(0x12f);}['animate'](){const _0x1d25d7=a0_0x7ecbb7;document['body'][_0x1d25d7(0x107)](this[_0x1d25d7(0xf5)]),this[_0x1d25d7(0x101)](_0x1d25d7(0xdf)),this['element'][_0x1d25d7(0x136)][_0x1d25d7(0x118)]='20px',this[_0x1d25d7(0xf5)][_0x1d25d7(0x136)][_0x1d25d7(0x119)]=_0x1d25d7(0xef),this[_0x1d25d7(0xf5)][_0x1d25d7(0x136)][_0x1d25d7(0x120)]='translateY(0)\x20scale(1)',this['element'][_0x1d25d7(0x136)][_0x1d25d7(0x10c)]='1',requestAnimationFrame(()=>{const _0x1bef93=_0x1d25d7;this['element'][_0x1bef93(0x136)][_0x1bef93(0x10e)]='all\x202s\x20ease-out',this[_0x1bef93(0xf5)][_0x1bef93(0x136)]['width']=_0x1bef93(0x14e),this[_0x1bef93(0xf5)][_0x1bef93(0x136)][_0x1bef93(0x119)]=_0x1bef93(0x14e),this[_0x1bef93(0xf5)][_0x1bef93(0x136)][_0x1bef93(0x120)]=_0x1bef93(0x10d),this['element'][_0x1bef93(0x136)][_0x1bef93(0x10c)]='0';}),setTimeout(()=>this[_0x1d25d7(0xf5)]['remove'](),0x7d0);}}class EffectFactory{static[a0_0x7ecbb7(0x145)](_0x8eebc9,_0x480200,_0x3e11cb){const _0x2e0104=a0_0x7ecbb7,_0x59c373='hsl('+Math[_0x2e0104(0x121)]()*0x168+',\x20100%,\x2050%)';switch(_0x8eebc9){case _0x2e0104(0x128):return new RippleEffect(_0x480200,_0x3e11cb,_0x59c373);case'pulse':return new PulseEffect(_0x480200,_0x3e11cb,_0x59c373);case _0x2e0104(0x12f):return new FloatEffect(_0x480200,_0x3e11cb,_0x59c373);case _0x2e0104(0x12a):default:return null;}}}function createGazePlot(){const _0x4f8da4=a0_0x7ecbb7,_0x4421f9=document['createElementNS'](_0x4f8da4(0x10a),_0x4f8da4(0x144));_0x4421f9[_0x4f8da4(0x129)]('width','100%'),_0x4421f9['setAttribute']('height',_0x4f8da4(0x152)),_0x4421f9[_0x4f8da4(0x136)][_0x4f8da4(0xf3)]='absolute',_0x4421f9['style'][_0x4f8da4(0xec)]='0',_0x4421f9[_0x4f8da4(0x136)][_0x4f8da4(0x14a)]='0',_0x4421f9[_0x4f8da4(0x136)][_0x4f8da4(0xfe)]=_0x4f8da4(0x12a),document['body'][_0x4f8da4(0x107)](_0x4421f9);const _0x47eae0=0x5a,_0x1f7bf1=0xc8;let _0xb009ba=[],_0x134060={'x':positions[0x0]['x'],'y':positions[0x0]['y'],'duration':interval,'points':[positions[0x0]]};for(let _0x48a1fa=0x1;_0x48a1fa<positions[_0x4f8da4(0xf8)];_0x48a1fa++){const _0x250039=positions[_0x48a1fa],_0x4f46c8=_0x250039['x']-_0x134060['x'],_0x54e79e=_0x250039['y']-_0x134060['y'],_0x1c35dc=Math[_0x4f8da4(0x110)](_0x4f46c8*_0x4f46c8+_0x54e79e*_0x54e79e);_0x1c35dc<_0x47eae0?(_0x134060[_0x4f8da4(0xeb)][_0x4f8da4(0x12c)](_0x250039),_0x134060['duration']+=interval):(_0x134060[_0x4f8da4(0x111)]>=_0x1f7bf1&&_0xb009ba[_0x4f8da4(0x12c)](_0x134060),_0x134060={'x':_0x250039['x'],'y':_0x250039['y'],'duration':interval,'points':[_0x250039]});}_0x134060[_0x4f8da4(0x111)]>=_0x1f7bf1&&_0xb009ba[_0x4f8da4(0x12c)](_0x134060);let _0x3ae820=null,_0x45dbe0=null;_0xb009ba[_0x4f8da4(0xe9)]((_0x2828a5,_0x27f0cf)=>{const _0x358860=_0x4f8da4,_0x1b4b4f=_0x2828a5['points']['reduce']((_0x365ed2,_0x1fdcca)=>_0x365ed2+_0x1fdcca['x'],0x0)/_0x2828a5[_0x358860(0xeb)]['length'],_0x34d972=_0x2828a5['points']['reduce']((_0x23ae93,_0xb5bd8e)=>_0x23ae93+_0xb5bd8e['y'],0x0)/_0x2828a5[_0x358860(0xeb)][_0x358860(0xf8)],_0xcc439c=document[_0x358860(0x123)](_0x358860(0x10a),_0x358860(0xe7));_0xcc439c[_0x358860(0x129)]('cx',_0x1b4b4f),_0xcc439c[_0x358860(0x129)]('cy',_0x34d972),_0xcc439c[_0x358860(0x129)]('r',Math[_0x358860(0xff)](_0x2828a5['duration']/ interval)*0x4),_0xcc439c['setAttribute'](_0x358860(0x127),_0x358860(0xfb)+_0x27f0cf*0x168/_0xb009ba[_0x358860(0xf8)]+_0x358860(0x11e)),_0x4421f9[_0x358860(0x107)](_0xcc439c);const _0x586fcf=document[_0x358860(0x123)](_0x358860(0x10a),_0x358860(0x108));_0x586fcf[_0x358860(0x129)]('x',_0x1b4b4f+0xf),_0x586fcf[_0x358860(0x129)]('y',_0x34d972-0xf),durationTime=Math[_0x358860(0xea)](_0x2828a5['duration']),_0x586fcf['textContent']=durationTime+'ms',_0x586fcf[_0x358860(0x129)](_0x358860(0x127),_0x358860(0x133)),_0x586fcf[_0x358860(0x129)](_0x358860(0x11c),_0x358860(0x156)),_0x4421f9[_0x358860(0x107)](_0x586fcf);if(_0x3ae820!==null&&_0x45dbe0!==null){const _0x309b19=document[_0x358860(0x123)](_0x358860(0x10a),_0x358860(0xf1));_0x309b19[_0x358860(0x129)]('x1',_0x3ae820),_0x309b19[_0x358860(0x129)]('y1',_0x45dbe0),_0x309b19[_0x358860(0x129)]('x2',_0x1b4b4f),_0x309b19[_0x358860(0x129)]('y2',_0x34d972),_0x309b19[_0x358860(0x129)](_0x358860(0x141),_0x358860(0xfb)+_0x27f0cf*0x168/_0xb009ba[_0x358860(0xf8)]+_0x358860(0x11e)),_0x309b19[_0x358860(0x129)](_0x358860(0xdd),'2'),_0x4421f9['appendChild'](_0x309b19);}_0x3ae820=_0x1b4b4f,_0x45dbe0=_0x34d972;const _0x1b35e7=document[_0x358860(0x123)]('http://www.w3.org/2000/svg',_0x358860(0x108));_0x1b35e7[_0x358860(0x129)]('x',_0x1b4b4f+0x5),_0x1b35e7[_0x358860(0x129)]('y',_0x34d972+0x5),_0x1b35e7['textContent']=_0x27f0cf+0x1,_0x1b35e7[_0x358860(0x129)]('fill',_0x358860(0x133)),_0x1b35e7['setAttribute'](_0x358860(0x11c),'10px'),_0x4421f9[_0x358860(0x107)](_0x1b35e7);});}startButton['addEventListener'](a0_0x7ecbb7(0x105),startTracking),resetBackgroundButton[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0x105),resetBackground),clearHeatmapButton[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0x105),clearHeatmap),exportButton['addEventListener'](a0_0x7ecbb7(0x105),exportHeatmap),backgroundInput[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0xe8),setBackgroundImage),document[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0x13b),trackMouseMovement),document[a0_0x7ecbb7(0x147)]('mousemove',_0x3ed916=>{const _0x594e15=a0_0x7ecbb7;lastKnownMousePosition['x']=_0x3ed916[_0x594e15(0x13d)],lastKnownMousePosition['y']=_0x3ed916[_0x594e15(0x153)];}),window[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0xf7),()=>heatmap[a0_0x7ecbb7(0xf7)]()),volumeControl['addEventListener'](a0_0x7ecbb7(0xe5),function(){const _0x5b2cd0=a0_0x7ecbb7,_0x33a520=this[_0x5b2cd0(0xfa)];document[_0x5b2cd0(0x103)](_0x5b2cd0(0x135))[_0x5b2cd0(0x126)]=_0x33a520,document[_0x5b2cd0(0x103)]('pulseSound')[_0x5b2cd0(0x126)]=_0x33a520;}),document[a0_0x7ecbb7(0x103)](a0_0x7ecbb7(0x132))[a0_0x7ecbb7(0x147)](a0_0x7ecbb7(0x105),createGazePlot);function startTracking(){const _0x82dd0d=a0_0x7ecbb7;if(isTracking)return;const _0x435e20=parseInt(durationInput[_0x82dd0d(0xfa)]);if(isNaN(_0x435e20)||_0x435e20<0x1||_0x435e20>0x3c){alert(_0x82dd0d(0x109));return;}Effect[_0x82dd0d(0x11f)](),clearHeatmap(),isTracking=!![],controlPanel['classList'][_0x82dd0d(0x102)](_0x82dd0d(0x117)),disableControls(!![]),startButton[_0x82dd0d(0x149)]='Tracking...',trackingTimer=setTimeout(endTracking,_0x435e20*0x3e8),updateMousePosition();}function endTracking(){const _0x4a412d=a0_0x7ecbb7;isTracking=![],heatmap['setData']({'max':0x1,'data':positions}),controlPanel[_0x4a412d(0x12e)][_0x4a412d(0x13f)](_0x4a412d(0x117)),disableControls(![]),startButton[_0x4a412d(0x149)]=_0x4a412d(0x142);}function resetBackground(){const _0x5ab96d=a0_0x7ecbb7;document['body'][_0x5ab96d(0x136)][_0x5ab96d(0x13c)]='none',document['body'][_0x5ab96d(0x136)]['backgroundColor']=_0x5ab96d(0x104),backgroundInput[_0x5ab96d(0xfa)]='';}function clearHeatmap(){const _0x46b0aa=a0_0x7ecbb7;heatmap[_0x46b0aa(0xf2)]({'max':0x1,'data':[]}),positions=[];}function a0_0x359c(_0x24fe3a,_0x5aaef5){const _0x2f9942=a0_0x2f99();return a0_0x359c=function(_0x359cce,_0x39c7a0){_0x359cce=_0x359cce-0xdb;let _0x51c686=_0x2f9942[_0x359cce];return _0x51c686;},a0_0x359c(_0x24fe3a,_0x5aaef5);}function a0_0x2f99(){const _0x4512a9=['arrayBuffer','decodeAudioData','scrollWidth','60px','heatmap_export.png','buffer','7HPSDNG','100%','pageY','body','url(\x27','12px','now','audioContext','playbackRate','stroke-width','504580egCJqQ','sounds/short_float.mp3','disabled','image/octet-stream','createBufferSource','Error\x20playing\x20sound:','start','input','target','circle','change','forEach','round','points','top','5109784xDrqRk','19413660tMGNZF','20px','741231NjgFWR','line','setData','position','create','element','backgroundInput','resize','length','state','value','hsl(','backgroundColor','1984648KBQlfm','pointerEvents','log2','log','playSound','add','getElementById','black','click','2886DRojzk','appendChild','text','Please\x20enter\x20a\x20valid\x20duration\x20between\x201\x20and\x2060\x20seconds.','http://www.w3.org/2000/svg','AudioContext','opacity','translateY(-100px)','transition','animate','sqrt','duration','onended','pulse','readAsDataURL','createElement','image/png','hidden','width','height','className','heatmapContainer','font-size','8TIbNEn',',\x20100%,\x2050%)','initAudioContext','transform','random','7235LIZOqX','createElementNS','onload','replace','volume','fill','ripple','setAttribute','none','webkitAudioContext','push','resetBackgroundButton','classList','float','files','rgba(0,\x200,\x200,\x200)','showGazePlotButton','white','currentSound','rippleSound','style','9847260KbBDBU','startButton','then','resume','mousemove','backgroundImage','pageX','scrollHeight','remove','durationInput','stroke','Start\x20Tracking','error','svg','createEffect','absolute','addEventListener','controlPanel','textContent','left'];a0_0x2f99=function(){return _0x4512a9;};return a0_0x2f99();}function exportHeatmap(){const _0x10f08c=a0_0x7ecbb7;controlPanel[_0x10f08c(0x12e)][_0x10f08c(0x102)](_0x10f08c(0x117)),setTimeout(()=>{const _0x282ff0=_0x10f08c;html2canvas(document['body'],{'width':document[_0x282ff0(0x154)][_0x282ff0(0x14d)],'height':document[_0x282ff0(0x154)][_0x282ff0(0x13e)],'scale':0x1,'useCORS':!![]})[_0x282ff0(0x139)](_0x1dce9b=>{const _0x396bfb=_0x282ff0,_0x99430b=_0x1dce9b['toDataURL'](_0x396bfb(0x116))[_0x396bfb(0x125)]('image/png',_0x396bfb(0xe1)),_0x5a7fd5=document['createElement']('a');_0x5a7fd5['download']=_0x396bfb(0x14f),_0x5a7fd5['href']=_0x99430b,_0x5a7fd5[_0x396bfb(0x105)](),controlPanel[_0x396bfb(0x12e)][_0x396bfb(0x13f)](_0x396bfb(0x117));});},0x12c);}function setBackgroundImage(_0xac73c6){const _0x1c75dc=a0_0x7ecbb7,_0xb986e=_0xac73c6[_0x1c75dc(0xe6)][_0x1c75dc(0x130)][0x0];if(_0xb986e){const _0x5417e5=new FileReader();_0x5417e5[_0x1c75dc(0x124)]=function(_0x4fe91e){const _0xab3887=_0x1c75dc;document['body'][_0xab3887(0x136)][_0xab3887(0x13c)]=_0xab3887(0x155)+_0x4fe91e[_0xab3887(0xe6)]['result']+'\x27)';},_0x5417e5[_0x1c75dc(0x114)](_0xb986e);}else resetBackground();}function trackMouseMovement(_0x176868){const _0x54c125=a0_0x7ecbb7;if(!isTracking)return;const _0x3b22a3=performance[_0x54c125(0x157)](),_0x1c9432=performance[_0x54c125(0x157)]();_0x3b22a3-lastMoveTime>interval&&(lastMoveTime=_0x3b22a3);if(_0x1c9432-lastMoveTimeForEffects>0x64){console[_0x54c125(0x100)]('effect'),lastMoveTimeForEffects=_0x1c9432;const _0x3fbffc=effectSelect[_0x54c125(0xfa)],_0x16b4b6=EffectFactory['createEffect'](_0x3fbffc,_0x176868[_0x54c125(0x13d)],_0x176868[_0x54c125(0x153)]);_0x16b4b6&&_0x16b4b6[_0x54c125(0x10f)]();}}function updateMousePosition(){if(!isTracking)return;positions['push']({'x':lastKnownMousePosition['x'],'y':lastKnownMousePosition['y'],'value':0x1}),setTimeout(updateMousePosition,interval);}function disableControls(_0xf795bf){const _0x100a70=a0_0x7ecbb7;startButton['disabled']=_0xf795bf,durationInput[_0x100a70(0xe0)]=_0xf795bf,backgroundInput[_0x100a70(0xe0)]=_0xf795bf,resetBackgroundButton[_0x100a70(0xe0)]=_0xf795bf,clearHeatmapButton[_0x100a70(0xe0)]=_0xf795bf,exportButton['disabled']=_0xf795bf,effectSelect['disabled']=_0xf795bf;}